function datetimepickerset(){$(".datetimepicker").datetimepicker({lang:"ru",timepicker:!1,format:"Y-m-d",mask:!0,closeOnDateSelect:0,defaultDate:new Date,dayOfWeekStart:1})}$(document).foundation();var idUser="";$('input[type="tel"]').mask("9 (999) 999-9999");var getStreets=function(e,t){var a=$('select[name="street"] option[value=""]');$.ajax({url:e,type:"POST",success:function(e){var r=$.parseJSON(e),s="";$(a).text("..."),$.each(r,function(e,t){s=s+'<option value="'+t.id+'">'+t.name+"</option>"}),$('select[name="street"]').append(s),$('select[name="street"] option[value="'+t+'"]').attr("selected","selected"),delete window.result,"undefined"==typeof t&&$('select[name="street"]').removeAttr("disabled")},error:function(){$(a).text("oops, error server")}})};$("a.add:enabled").click(function(){return $(this).hasClass("alert")?void $(this).parent().parent().remove():($(clonePhoneCollcetion).clone(!0).appendTo(".container-phone"),$('input[type="tel"]').mask("9 (999) 999-9999"),void $(this).removeClass("success").addClass("alert").children("i").removeClass("fa-plus").addClass("fa-minus"))}),$('select[name="street"]').attr("disabled","disabled"),$('select[name="city"]').change(function(){var e=$('select[name="street"] option[value=""]');if($('select[name="street"]').attr("disabled","disabled"),$('select[name="street"]').children().remove(),$('select[name="street"]').append('<option value="">...</option>'),""===$(this).val())return $('select[name="street"]').attr("disabled","disabled"),void $(e).text("...");$(e).text("Загрузка улиц...");var t="/get/street/"+$(this).val();$('select[name="street"]').append(getStreets(t))}),$('a[data-reveal-id="modal-creat-user"]').click(function(){$('form[name="creat-user"]').children().remove(),$(cloneCreatForm).clone(!0).appendTo('form[name="creat-user"]'),$('input[type="tel"]').mask("9 (999) 999-9999"),datetimepickerset()}),$("a[data-id-user]").click(function(){$('input[type="submit"]').hide(),$("#update").show(),$("#read-user").children().remove(),$("#read-user").append("<h3>Загрузка данны с сервера... </h3>"),idUser=$(this).attr("data-id-user");var e="/contact/read/"+idUser;$.ajax({url:e,type:"POST",success:function(e){$("#read-user").children().remove();var t="/contact/update/"+idUser;$("#modal-read-user form").attr("action",t);var a=$.parseJSON(e);$(cloneCreatForm).clone(!0).appendTo("#read-user"),$('input[type="tel"]').mask("9 (999) 999-9999"),datetimepickerset(),$("#read-user div:last").remove(),$('#modal-read-user input[name="name"]').val(a.name),$('#modal-read-user input[name="surname"]').val(a.surname),$('#modal-read-user input[name="patronymic"]').val(a.patronymic),$('#modal-read-user input[value="'+a.avatar+'"]').attr("checked","checked"),$('#modal-read-user input[name="bith"]').val(a.bith),$('#modal-read-user select[name="city"] option[value="'+a.cid+'"]').attr("selected","selected");var t="/get/street/"+a.cid;$('select[name="street"]').append(getStreets(t,a.sid)),$(".phoneCollcetion").remove();var r=$(a.numbers).length;$.each(a.numbers,function(e,t){var a=$(clonePhoneCollcetion).clone(!0);e!=r-1&&$(a).find("a.add").removeClass("success").addClass("alert").children("i").removeClass("fa-plus").addClass("fa-minus"),$(a).find('input[type="tel"]').val(t),$(a).appendTo(".container-phone"),$('input[type="tel"]').mask("9 (999) 999-9999")}),$("#modal-read-user input").attr("disabled","disabled"),$("#modal-read-user select").attr("disabled","disabled"),$("#modal-read-user .avatar").hide(),$("#modal-read-user a.add").attr("disabled","disabled")},error:function(){$("#read-user").children().remove(),$("#read-user").append("<h3>Не получилось загрузить,<br> ошибка на сервере</h3>")}})}),$("#update").click(function(){$(this).hide(),$("input").removeAttr("disabled"),$("select").removeAttr("disabled"),$('input[type="submit"]').show(),$("a.add").removeAttr("disabled"),$(".avatar").show()}),$("#delete").click(function(){var e=$(this).attr("href");e+=idUser,$(this).attr("href",e)});var cloneCreatForm=$('form[name="creat-user"]').children().clone(!0),clonePhoneCollcetion=$(".phoneCollcetion").clone(!0);